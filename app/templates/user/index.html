{% include "user/header.html" %} {% load static %}


<!-- Hero Start -->
<div class="container-fluid py-5 mb-5 hero-header">
  <div class="container py-5">
    <div class="row g-5 align-items-center">
      <div class="col-md-12 col-lg-7">
        <h1 class="mb-3 text-secondary">100% Sản phẩm tươi, sạch</h1>
      
        <div class="position-relative mx-auto">
          <form method="get" action="/shop/">
          <input
            class="form-control border-2 border-secondary w-75 py-3 px-4 rounded-pill"
            type="text"
            placeholder="Search"
            name="search"
          />
          <button
            type="submit"
            class="btn btn-primary border-2 border-secondary py-3 px-4 position-absolute rounded-pill text-white h-100"
            style="top: 0; right: 25%"
          >
           Tìm kiếm
          </button>
          </form>
        </div>
      </div>
      <div class="col-md-12 col-lg-5">
        <div
          id="carouselId"
          class="carousel slide position-relative"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner" role="listbox">
            <div class="carousel-item active rounded">
              <img src="{%static "user/img/hero-img-1.png"%}" class="img-fluid w-100
              h-100 bg-secondary rounded" alt="First slide" />
            </div>
            <div class="carousel-item rounded">
              <img src="{%static "user/img/hero-img-2.jpg"%}" class="img-fluid w-100
              h-100 rounded" alt="Second slide" />
              
            </div>
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselId"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselId"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Hero End -->


<!-- Fruits Shop Start-->
<div class="container-fluid fruite py-5">
  <div class="container py-5">
    <div class="tab-class text-center">
      <div class="row g-4">
        <div class="col-lg-4 text-start">
          <h1>Các loại nông sản của chúng tôi</h1>
        </div>
        <div class="col-lg-8 text-end">
          <ul class="nav nav-pills d-inline-flex text-center mb-5">
            <li class="nav-item">
              <a
                class="d-flex m-2 py-2 bg-light rounded-pill active"
                data-bs-toggle="pill"
                href="#tab-1"
              >
                <span class="text-dark" style="width: 130px">All Products</span>
              </a>
            </li>

            {%for category in categories%}
            <li class="nav-item">
              <a
                class="d-flex py-2 m-2 bg-light rounded-pill"
                data-bs-toggle="pill"
                href="#{{category.madanhmuc}}"
              >
                <span class="text-dark" style="width: 130px"
                  >{{category.tendanhmuc}}</span
                >
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <div class="tab-content">
        <div id="tab-1" class="tab-pane fade show p-0 active">
          <div class="row g-4">
            <div class="col-lg-12">
              <div class="row g-4">
                {% for product in products %}
                <div class="col-md-6 col-lg-4 col-xl-3">
                    <div class="rounded position-relative fruite-item">
                        <div class="fruite-img">
                            <img src="{{ product.image.url }}" class="img-fluid w-100 rounded-top" alt="" />
                        </div>
                        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px">
                            {{ product.madanhmuc.tendanhmuc }}
                        </div>
                        <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                            <h4><a href="/shop-detail/{{ product.idnongsan }}">{{ product.ten }}</a></h4>
                            <p>{{ product.mota }}</p>
                            <div class="d-flex justify-content-between flex-lg-wrap">
                                {% for giamgia in result %}
                                {% if giamgia.idnongsan == product.idnongsan %}
                                {% if giamgia.gia_da_giam < product.gia %}
                                <p class="text-dark fs-5 fw-bold mb-0">
                                    <del>{{ product.gia|floatformat:0 }} / kg</del>
                                </p>
                                <p class="text-danger fs-5 fw-bold mb-0">
                                    {{ giamgia.gia_da_giam|floatformat:0 }} / kg
                                </p>
                                {% else %}
                                <p class="text-dark fs-5 fw-bold mb-0">
                                    {{ product.gia|floatformat:0 }} / kg
                                </p>
                                {% endif %}
                                {% endif %}
                                {% endfor %}
                                <a href="{% url 'add_to_cart' product.idnongsan %}" class="btn border border-secondary rounded-pill px-3 text-primary">
                                    <i class="fa fa-shopping-bag me-2 text-primary"></i> Add to cart
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
              </div>
            </div>
          </div>
        </div>
        {% for category in categories %}
        <div id="{{ category.madanhmuc }}" class="tab-pane fade show p-0">
          <div class="row g-4">
            <div class="col-lg-12">
              <div class="row g-4">
                {% for product in products %}
                  {% if product.madanhmuc.madanhmuc == category.madanhmuc %}
                    <div class="col-md-6 col-lg-4 col-xl-3">
                      <div class="rounded position-relative fruite-item">
                        <div class="fruite-img">
                          <img src="{{ product.image.url }}" class="img-fluid w-100 rounded-top" alt="" />
                        </div>
                        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px">
                          {{ category.tendanhmuc }}
                        </div>
                        <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                          <h4><a href="/shop-detail/{{product.idnongsan}}">{{ product.ten }}</a></h4>
                          
                          <p>
                           {{product.mota}}
                          </p>
                          <div class="d-flex justify-content-between flex-lg-wrap">
                            {% for giamgia in result %}
                            {% if giamgia.idnongsan == product.idnongsan %}
                            {% if giamgia.gia_da_giam < product.gia %}
                            <p class="text-dark fs-5 fw-bold mb-0">
                                <del>{{ product.gia|floatformat:0 }} / kg</del>
                            </p>
                            <p class="text-danger fs-5 fw-bold mb-0">
                                {{ giamgia.gia_da_giam|floatformat:0 }} / kg
                            </p>
                            {% else %}
                            <p class="text-dark fs-5 fw-bold mb-0">
                                {{ product.gia|floatformat:0 }} / kg
                            </p>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                            <a href="{% url 'add_to_cart' product.idnongsan %}" class="btn border border-secondary rounded-pill px-3 text-primary">
                              <i class="fa fa-shopping-bag me-2 text-primary"></i>
                              Add to cart
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  {% endif %}
                {% empty %}
                  <p>Không có sản phẩm nào thuộc danh mục này.</p>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      
      </div>
    </div>
  </div>
</div>
<!-- Fruits Shop End-->


<!-- Bestsaler Product Start -->
<div class="container-fluid py-5">
  <div class="container py-5">
    <div class="text-center mx-auto mb-5" style="max-width: 700px">
      <h1 class="display-4">Sản phẩm bán chạy</h1>
    
    </div>
    <div class="row g-4">
      {% for product in best_selling_products %}
      <div class="col-lg-6 col-xl-4">
        <div class="p-4 rounded bg-light">
          <div class="row align-items-center">
            <div class="col-6">
              <img src="{{product.image.url}}" class="img-fluid
              rounded-circle w-100" alt="" />
            </div>
            
            <div class="col-6">
              <a href="/shop-detail/{{product.idnongsan}}" class="h5">{{product.ten}}</a>
              <p>
                {{product.mota}}
              </p>
              <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px">
                {{ product.madanhmuc.tendanhmuc }}
            </div>
              {% for giamgia in result %}
              {% if giamgia.idnongsan == product.idnongsan %}
              {% if giamgia.gia_da_giam < product.gia %}
              <p class="text-dark fs-5 fw-bold mb-0">
                  <del>{{ product.gia|floatformat:0 }} / kg</del>
              </p>
              <p class="text-danger fs-5 fw-bold mb-0">
                  {{ giamgia.gia_da_giam|floatformat:0 }} / kg
              </p>
              {% else %}
              <p class="text-dark fs-5 fw-bold mb-0">
                  {{ product.gia|floatformat:0 }} / kg
              </p>
              {% endif %}
              {% endif %}
              {% endfor %}
              <a
                href="{% url 'add_to_cart' product.idnongsan %}"
                class="btn border border-secondary rounded-pill px-3 text-primary"
                ><i class="fa fa-shopping-bag me-2 text-primary"></i> Add to
                cart</a
              >
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
<!-- Bestsaler Product End -->




{% include "user/footer.html"%}
