{% include "user/header.html" %} {% load static %}

<!-- Modal Search Start -->
<div
  class="modal fade"
  id="searchModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-fullscreen">
    <div class="modal-content rounded-0">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Search by keyword</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body d-flex align-items-center">
        <div class="input-group w-75 mx-auto d-flex">
          <input
            type="search"
            class="form-control p-3"
            placeholder="keywords"
            aria-describedby="search-icon-1"
          />
          <span id="search-icon-1" class="input-group-text p-3"
            ><i class="fa fa-search"></i
          ></span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Modal Search End -->

<!-- Single Page Header start -->
<div class="container-fluid page-header py-5">
  <h1 class="text-center text-white display-6">Checkout</h1>
  <ol class="breadcrumb justify-content-center mb-0">
    <li class="breadcrumb-item"><a href="#">Home</a></li>
    <li class="breadcrumb-item"><a href="#">Pages</a></li>
    <li class="breadcrumb-item active text-white">Checkout</li>
  </ol>
</div>
<!-- Single Page Header End -->

<!-- Checkout Page Start -->
<div class="container-fluid py-5">
  <div class="container py-5">
    <h1 class="mb-4">Billing details</h1>
    <form method="post" action="{% url 'checkout' %}">
      {% csrf_token %} 
      {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
      <div class="row g-5">
        <div class="col-md-12 col-lg-6 col-xl-7">
          <div class="row">
            <div class="form-item w-100">
              <label class="form-label my-3">Fullname<sup>*</sup></label>
              <input type="text" class="form-control"
            
              placeholder="Họ và tên"
              value="{{request.session.khachHang_name}}"
              />
            </div>
          </div>
          <div class="form-item">
            <label class="form-label my-3">Address<sup>*</sup></label>
            <input type="text" class="form-control" 
            placeholder="Địa chỉ nhận hàng"
            value="{{request.session.khachHang_address}}"

            />
            
          </div>
          <div class="form-item">
            <label class="form-label my-3">Phone <sup>*</sup></label>
            <input
              type="text"
              class="form-control"
              placeholder="Số điện thoại"
              value="{{request.session.khachHang_phone}}"

            />
          </div>
      
          
         
          <div class="form-item">
            <label class="form-label my-3">Email Address<sup>*</sup></label>
            <input type="email" class="form-control" 
            placeholder="Email"
            value="{{request.session.khachHang_email}}"
            
            />
          </div>
        </div>
        <div class="col-md-12 col-lg-6 col-xl-5">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Products</th>
                  <th scope="col">Name</th>
                  <th scope="col">Price</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Total</th>
                </tr>
              </thead>
              <tbody>
                {% if cart_items %}
                  {% for item in cart_items %}
                    <tr>
                      <th scope="row">
                        <div class="d-flex align-items-center mt-2">
                          <img
                            src="{{ item.nongsan.image.url }}"
                            class="img-fluid rounded-circle"
                            style="width: 90px; height: 90px"
                            alt="{{ item.nongsan.ten }}"
                          />
                        </div>
                      </th>
                      <td class="py-5">{{ item.nongsan.ten }}</td>
                      <td class="py-5">
                        {% if item.giamgia %}
                          <p class="mb-0"><del>{{ item.nongsan.gia|floatformat:0 }} VNĐ</del></p>
                          <p class="mb-0 text-danger">{{ item.gia_da_giam|floatformat:0 }} VNĐ</p>
                        {% else %}
                          <p class="mb-0">{{ item.nongsan.gia }} VNĐ</p>
                        {% endif %}
                      </td>
                      <td class="py-5">{{ item.quantity }}</td>
                      <td class="py-5">{{ item.total_price|floatformat:0 }} VNĐ</td>
                    </tr>
                  {% endfor %}
                {% else %}
                  <tr>
                    <td colspan="5" class="text-center py-5">Giỏ hàng của bạn đang trống</td>
                  </tr>
                {% endif %}
                
                <tr>
                  <th scope="row"></th>
                  <td class="py-5">
                    <p class="mb-0 text-dark text-uppercase py-3">TỔNG CỘNG</p>
                  </td>
                  <td class="py-5"></td>
                  <td class="py-5"></td>
                  <td class="py-5">
                    <div class="py-3 border-bottom border-top">
                      <p class="mb-0 text-dark">{{ total_price|floatformat:0 }} VNĐ</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row g-4 text-center align-items-center justify-content-center pt-4">
            <form method="post" action="{% url 'checkout' %}">
              {% csrf_token %}
              <button
                type="submit"
                class="btn border-secondary py-3 px-4 text-uppercase w-100 text-primary"
              >
                Place Order
              </button>
            </form>
          </div>
        </div>
        
      </div>
    </form>
  </div>
</div>
<!-- Checkout Page End -->

{% include "user/footer.html"%}
